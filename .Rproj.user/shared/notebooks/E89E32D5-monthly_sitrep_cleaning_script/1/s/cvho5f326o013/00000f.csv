"0",""
"0","# list.files(""./data/unicef_internal"")"
"0",""
"0","clean_monthly_sitrep <- function(x) {"
"0","  x %>% "
"0","  select(-matches(""narrative""), "
"0","         -index) %>% "
"0","  pivot_longer(cols = indicator1_host_community_boys:indicator7_cwd_total_children, "
"0","               names_to = ""sub_indicator"", "
"0","               values_to = ""value"") %>% "
"0","  mutate(month = fct_relevel(month, c(""January"", ""February"", ""March"","
"0","                                      ""April"", ""May"", ""June"", "
"0","                                      ""July"", ""August"", ""September"", "
"0","                                      ""October"", ""November"", ""December""))) %>% "
"0","  mutate(unicef_indicator_number = as.factor(parse_number(sub_indicator)), "
"0","         unicef_indicator = case_when(str_detect(sub_indicator, ""1"") ~ "
"0","                                       ""1. OOSC accessing formal education"", "
"0","                                     str_detect(sub_indicator, ""2"") ~ "
"0","                                       ""2. Children benefiting from child-friendly environment"", "
"0","                                     str_detect(sub_indicator, ""3"") ~ "
"0","                                       ""3. Children who receive assistance to continue learning"", "
"0","                                     str_detect(sub_indicator, ""4"") ~ "
"0","                                       ""4. Teachers trained resilience programmes"", "
"0","                                     str_detect(sub_indicator, ""5"") ~ "
"0","                                       ""5. BoM trained resilience programmes"", "
"0","                                     str_detect(sub_indicator, ""6"") ~ "
"0","                                       ""6. Govt. officials trained"", "
"0","                                     str_detect(sub_indicator, ""7"") ~ "
"0","                                       ""7. Children life skills mentorship"")) %>% "
"0","  mutate(sex_modifier = case_when(str_detect(sub_indicator, ""narrative"") ~ NA_character_,"
"0","                                  str_detect(sub_indicator, ""girls|women|Women|Girls|Female|female"") ~ ""female"", "
"0","                                  str_detect(sub_indicator, ""boys|Boys|men|Men|Male|male"") ~ ""male"","
"0","                                  str_detect(sub_indicator, ""total"") ~ ""total"", "
"0","                                  TRUE ~ NA_character_), "
"0","         beneficiary_group = case_when(str_detect(sub_indicator, ""narrative"") ~ NA_character_,"
"0","                                       str_detect(sub_indicator, ""host_community"") ~ ""host_community"", "
"0","                                       str_detect(sub_indicator, ""idps"") ~ ""idps"", "
"0","                                       str_detect(sub_indicator, ""refugees"") ~ ""refugees"","
"0","                                       str_detect(sub_indicator, ""all"") ~ ""all"","
"0","                                       str_detect(sub_indicator, ""cwd"") ~ ""cwd"","
"0","                                       TRUE ~ NA_character_), "
"0","         age_modifier = case_when(str_detect(sub_indicator, ""narrative"") ~ NA_character_,"
"0","                                  str_detect(sub_indicator, ""boys|girls|children"") ~ ""children"", "
"0","                                  str_detect(sub_indicator, ""Male|male|Female|female|adults"") ~ ""adults"", "
"0","                                  str_detect(sub_indicator, ""all"") & "
"0","                                    str_detect(sub_indicator, ""1|3|7|2"") ~ ""children"", "
"0","                                  str_detect(sub_indicator, ""all"") & "
"0","                                    str_detect(sub_indicator, ""5|6|4"") ~ ""adults"","
"0","                                  TRUE ~ NA_character_)) %>% "
"0","  mutate(age_modifier = case_when(str_detect(sub_indicator, ""1|3|7"") & is.na(age_modifier) & "
"0","                                    !str_detect(sub_indicator, ""narrative"") ~ ""children"", "
"0","                                str_detect(sub_indicator, ""4|5|6"") & is.na(age_modifier) & "
"0","                                  !str_detect(sub_indicator, ""narrative"") ~ ""adults"","
"0","                                str_detect(sub_indicator, ""2"") & !is.na(sex_modifier) ~ ""children"", "
"0","                                TRUE ~ age_modifier))"
"0","}"
