"0","top <- crossing(combined %>% distinct(county),"
"0","                   combined %>% distinct(month),"
"0","                   messy) %>% "
"0","  rename(sub_indicator = messy) %>% "
"0","  mutate(key = paste0(county, month, sub_indicator)) %>% "
"0","  left_join(combined %>% "
"0","              mutate(key = paste0(county, month, sub_indicator)) %>% "
"0","              select(key, value, char_value),"
"0","            by = ""key"") %>% "
"0","  filter(!str_detect(sub_indicator, ""x|month"")) %>% "
"0","  mutate(char_value = ifelse(str_detect(sub_indicator, ""narrative""), "
"0","                char_value, NA_character_)) %>%"
"0","  replace_na(list(value = 0)) %>% "
"0","  mutate(value = ifelse(str_detect(sub_indicator, ""narrative""), "
"0","                char_value, value)) %>% "
"0","  select(-key, -char_value) %>% "
"0","  pivot_wider(names_from = sub_indicator, "
"0","              values_from = value) %>% "
"0","  mutate_at(vars(!matches(""narrative|county|month"")), "
"0","            ~ as.numeric(.)) %>% "
"0","  group_by(month) %>% "
"0","  summarise_at(vars(!matches(""narrative|county|month"")), ~ sum(., na.rm = TRUE)) %>% "
"0","  mutate(indicator1_narrative = """", "
"0","         indicator2_narrative = """", "
"0","         indicator3_narrative = """", "
"0","         indicator4_narrative = """", "
"0","         indicator5_narrative = """", "
"0","         indicator6_narrative = """", "
"0","         indicator7_narrative = """", "
"0","         county = ""Total"") %>% "
"0","  column_selector() %>% "
"0","  select(-county, -month)"
"0",""
"0","top %>% write_csv(""./data/top_table.csv"")"
