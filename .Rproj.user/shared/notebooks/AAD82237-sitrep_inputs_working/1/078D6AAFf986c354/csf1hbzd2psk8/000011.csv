"0",""
"0",""
"0","combined <- read_excel(""./data/unicef_internal/Copy of Monthly Education SitRep_Jul23_lzo.xlsx"") %>% "
"0","  clean_messy_table_alt() %>% "
"0","  rename(lzo_value = value, "
"0","         lzo_char_value = char_value) %>% "
"0","  left_join(read_excel(""./data/unicef_internal/Kajiado Kwale Kilifi Monthly Education SitRep_Jul23.xlsx"") %>% "
"0","              clean_messy_table_alt() %>% "
"0","              rename(kzo_value = value, "
"0","                     kzo_char_value = char_value), "
"0","            by = c(""month"", ""county"", ""indicator"")) %>% "
"0","  left_join(read_excel(""./data/unicef_internal/Copy of Monthly Education SitRep_July 2023 GZO input.xlsx"") %>% "
"0","              clean_messy_table_alt() %>% "
"0","              rename(gzo_value = value, "
"0","                     gzo_char_value = char_value), "
"0","            by = c(""month"", ""county"", ""indicator"")) %>% "
"0","  mutate(value = case_when(!is.na(lzo_value) & !is.na(kzo_value) & !is.na(gzo_value) ~ "
"0","                             pmax(lzo_value, kzo_value, gzo_value),"
"0","                           !is.na(lzo_value) & !is.na(kzo_value) ~ "
"0","                             pmax(lzo_value, kzo_value), "
"0","                           !is.na(lzo_value) & !is.na(gzo_value) ~ "
"0","                             pmax(lzo_value, gzo_value),"
"0","                           !is.na(kzo_value) & !is.na(gzo_value) ~ "
"0","                             pmax(kzo_value, gzo_value),"
"0","                           is.na(lzo_value) & is.na(kzo_value) ~ gzo_value, "
"0","                           is.na(gzo_value) & is.na(kzo_value) ~ lzo_value, "
"0","                           is.na(gzo_value) & is.na(lzo_value) ~ kzo_value, "
"0","                           TRUE ~ NA_integer_)) %>% "
"0","   mutate(char_value = case_when(!is.na(lzo_char_value) ~ lzo_char_value, "
"0","                            !is.na(gzo_char_value) ~ gzo_char_value, "
"0","                            !is.na(kzo_char_value) ~ kzo_char_value, "
"0","                            TRUE ~ NA_character_)) %>% "
"0","  rename(sub_indicator = indicator) %>% "
"0","  mutate(sex_modifier = case_when(str_detect(sub_indicator, ""narrative"") ~ NA_character_,"
"0","                                  str_detect(sub_indicator, ""girls|women|Women|Girls|Female|female"") ~ ""female"", "
"0","                                  str_detect(sub_indicator, ""boys|Boys|men|Men|Male|male"") ~ ""male"", "
"0","                                  str_detect(sub_indicator, ""total"") ~ ""total"", "
"0","                                  TRUE ~ NA_character_), "
"0","         beneficiary_group = case_when(str_detect(sub_indicator, ""narrative"") ~ NA_character_,"
"0","                                       str_detect(sub_indicator, ""host_community"") ~ ""host_community"", "
"0","                                       str_detect(sub_indicator, ""idps"") ~ ""idps"", "
"0","                                       str_detect(sub_indicator, ""refugees"") ~ ""refugees"","
"0","                                       str_detect(sub_indicator, ""all"") ~ ""all"","
"0","                                       str_detect(sub_indicator, ""cwd"") ~ ""cwd"","
"0","                                       TRUE ~ NA_character_), "
"0","         age_modifier = case_when(str_detect(sub_indicator, ""narrative"") ~ NA_character_,"
"0","                                  str_detect(sub_indicator, ""boys|girls|children"") ~ ""children"", "
"0","                                  str_detect(sub_indicator, ""Male|male|Female|female|adults"") ~ ""adults"", "
"0","                                  str_detect(sub_indicator, ""all"") & str_detect(sub_indicator, ""1|3|7|2"") ~ ""children"", "
"0","                                  str_detect(sub_indicator, ""all"") & str_detect(sub_indicator, ""5|6|4"") ~ ""adults"","
"0","                                  TRUE ~ NA_character_)) %>% "
"0","  mutate(age_modifier = case_when(str_detect(sub_indicator, ""1|3|7"") & is.na(age_modifier) & "
"0","                                    !str_detect(sub_indicator, ""narrative"") ~ ""children"", "
"0","                                str_detect(sub_indicator, ""4|5|6"") & is.na(age_modifier) & "
"0","                                  !str_detect(sub_indicator, ""narrative"") ~ ""adults"","
"0","                                str_detect(sub_indicator, ""2"") & !is.na(sex_modifier) ~ ""children"", "
"0","                                TRUE ~ age_modifier)) %>% "
"0","  mutate(unicef_indicator_number = as.factor(parse_number(sub_indicator)), "
"0","         unicef_indicator = case_when(str_detect(sub_indicator, ""1"") ~ "
"0","                                       ""1. OOSC accessing formal education"", "
"0","                                     str_detect(sub_indicator, ""2"") ~ "
"0","                                       ""2. Children benefiting from child-friendly environment"", "
"0","                                     str_detect(sub_indicator, ""3"") ~ "
"0","                                       ""3. Children who receive assistance to continue learning"", "
"0","                                     str_detect(sub_indicator, ""4"") ~ "
"0","                                       ""4. Teachers trained resilience programmes"", "
"0","                                     str_detect(sub_indicator, ""5"") ~ "
"0","                                       ""5. BoM trained resilience programmes"", "
"0","                                     str_detect(sub_indicator, ""6"") ~ "
"0","                                       ""6. Govt. officials trained"", "
"0","                                     str_detect(sub_indicator, ""7"") ~ "
"0","                                       ""7. Children life skills mentorship"")) %>% "
"0","  select(-mohamed_value, -beth_value, -osman_value, "
"0","         -mohamed_char_value, -beth_char_value, -osman_char_value)"
"1","[1m[33mError[39m in `select()`:[22m
[33m![39m Can't subset columns that don't exist.
[31mx[39m Column `mohamed_value` doesn't exist.
Backtrace:
[90m 1. [39m... %>% ...
[90m 3. [39m[1m[94mdplyr:::select.data.frame([39m[22m...[1m[94m)[39m[22m
"
