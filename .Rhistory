"indicator2_rehabilitated_classrooms",
"indicator2_rehabiltated_latrines"),
sub_indicator, sub_indicator_alt)) %>%
select(-sub_indicator) %>%
left_join(
combined %>%
select(month, county, sub_indicator, value, sex_modifier) %>%
filter(!is.na(value)) %>%
pivot_wider(names_from = sex_modifier,
values_from = value) %>%
mutate(sub_indicator_alt = str_sub(sub_indicator, start = 1L, end = 15L)) %>%
rename(facility = `NA`) %>%
mutate(sub_indicator_alt = str_replace_all(sub_indicator_alt, "all_", "all"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "cwd_", "cwd"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "host", "host_community"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "refu", "refugees"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "narr", "narrative"),
sub_indicator_alt = ifelse(sub_indicator %in% c("new_classrooms",
"indicator2_new_latrines",
"indicator2_rehabilitated_classrooms",
"indicator2_rehabiltated_latrines"),
sub_indicator, sub_indicator_alt)) %>%
group_by(month, county, sub_indicator_alt) %>%
summarise(male = sum(male, na.rm = TRUE),
female = sum(female, na.rm = TRUE),
total = sum(total, na.rm = TRUE),
facility = sum(facility, na.rm = TRUE)) %>%
mutate(total = ifelse(total == 0 & male > 0 | female > 0, male + female, total)),
by = c("county" = "county", "month" = "month", "sub_indicator_alt" = "sub_indicator_alt")
)
combined %>%
select(month, county, sub_indicator, value, sex_modifier) %>%
filter(!is.na(value)) %>%
pivot_wider(names_from = sex_modifier,
values_from = value) %>%
mutate(sub_indicator_alt = str_sub(sub_indicator, start = 1L, end = 15L)) %>%
rename(facility = `NA`) %>%
mutate(sub_indicator_alt = str_replace_all(sub_indicator_alt, "all_", "all"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "cwd_", "cwd"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "host", "host_community"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "refu", "refugees"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "narr", "narrative"),
sub_indicator_alt = ifelse(sub_indicator %in% c("new_classrooms",
"indicator2_new_latrines",
"indicator2_rehabilitated_classrooms",
"indicator2_rehabiltated_latrines"),
sub_indicator, sub_indicator_alt)) %>%
group_by(month, county, sub_indicator_alt) %>%
summarise(male = sum(male, na.rm = TRUE),
female = sum(female, na.rm = TRUE),
total = sum(total, na.rm = TRUE),
facility = sum(facility, na.rm = TRUE)) %>%
mutate(total = ifelse(total == 0 & male > 0 | female > 0, male + female, total))
crossing(combined %>% distinct(county),
full_months,
messy) %>%
rename(sub_indicator = messy,
month = full_months) %>%
mutate(sub_indicator_alt = str_sub(sub_indicator, start = 1L, end = 15L)) %>%
mutate(sub_indicator_alt = str_replace_all(sub_indicator_alt, "all_", "all"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "cwd_", "cwd"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "host", "host_community"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "refu", "refugees"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "narr", "narrative"),
sub_indicator_alt = ifelse(sub_indicator %in% c("new_classrooms",
"indicator2_new_latrines",
"indicator2_rehabilitated_classrooms",
"indicator2_rehabiltated_latrines"),
sub_indicator, sub_indicator_alt)) %>%
select(-sub_indicator)
crossing(combined %>% distinct(county),
full_months,
messy) %>%
rename(sub_indicator = messy,
month = full_months) %>%
mutate(sub_indicator_alt = str_sub(sub_indicator, start = 1L, end = 15L)) %>%
mutate(sub_indicator_alt = str_replace_all(sub_indicator_alt, "all_", "all"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "cwd_", "cwd"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "host", "host_community"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "refu", "refugees"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "narr", "narrative"),
sub_indicator_alt = ifelse(sub_indicator %in% c("new_classrooms",
"indicator2_new_latrines",
"indicator2_rehabilitated_classrooms",
"indicator2_rehabiltated_latrines"),
sub_indicator, sub_indicator_alt)) %>%
select(-sub_indicator) %>%
filter(!str_detect(sub_indicator_alt, "x|month")) %>%
distinct(county, month, sub_indicator_alt) %>%
mutate(month = fct_relevel(month, full_months)) %>%
left_join(
combined %>%
select(month, county, sub_indicator, value, sex_modifier) %>%
filter(!is.na(value)) %>%
pivot_wider(names_from = sex_modifier,
values_from = value) %>%
mutate(sub_indicator_alt = str_sub(sub_indicator, start = 1L, end = 15L)) %>%
rename(facility = `NA`) %>%
mutate(sub_indicator_alt = str_replace_all(sub_indicator_alt, "all_", "all"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "cwd_", "cwd"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "host", "host_community"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "refu", "refugees"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "narr", "narrative"),
sub_indicator_alt = ifelse(sub_indicator %in% c("new_classrooms",
"indicator2_new_latrines",
"indicator2_rehabilitated_classrooms",
"indicator2_rehabiltated_latrines"),
sub_indicator, sub_indicator_alt)) %>%
group_by(month, county, sub_indicator_alt) %>%
summarise(male = sum(male, na.rm = TRUE),
female = sum(female, na.rm = TRUE),
total = sum(total, na.rm = TRUE),
facility = sum(facility, na.rm = TRUE)) %>%
mutate(total = ifelse(total == 0 & male > 0 | female > 0, male + female, total)),
by = c("county" = "county", "month" = "month", "sub_indicator_alt" = "sub_indicator_alt")
)
crossing(combined %>% distinct(county),
full_months,
messy) %>%
rename(sub_indicator = messy,
month = full_months) %>%
mutate(sub_indicator_alt = str_sub(sub_indicator, start = 1L, end = 15L)) %>%
mutate(sub_indicator_alt = str_replace_all(sub_indicator_alt, "all_", "all"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "cwd_", "cwd"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "host", "host_community"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "refu", "refugees"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "narr", "narrative"),
sub_indicator_alt = ifelse(sub_indicator %in% c("new_classrooms",
"indicator2_new_latrines",
"indicator2_rehabilitated_classrooms",
"indicator2_rehabiltated_latrines"),
sub_indicator, sub_indicator_alt)) %>%
select(-sub_indicator) %>%
filter(!str_detect(sub_indicator_alt, "x|month")) %>%
distinct(county, month, sub_indicator_alt) %>%
mutate(month = fct_relevel(month, full_months)) %>%
left_join(
combined %>%
select(month, county, sub_indicator, value, sex_modifier) %>%
filter(!is.na(value)) %>%
pivot_wider(names_from = sex_modifier,
values_from = value) %>%
mutate(sub_indicator_alt = str_sub(sub_indicator, start = 1L, end = 15L)) %>%
rename(facility = `NA`) %>%
mutate(sub_indicator_alt = str_replace_all(sub_indicator_alt, "all_", "all"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "cwd_", "cwd"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "host", "host_community"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "refu", "refugees"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "narr", "narrative"),
sub_indicator_alt = ifelse(sub_indicator %in% c("new_classrooms",
"indicator2_new_latrines",
"indicator2_rehabilitated_classrooms",
"indicator2_rehabiltated_latrines"),
sub_indicator, sub_indicator_alt)) %>%
group_by(month, county, sub_indicator_alt) %>%
summarise(male = sum(male, na.rm = TRUE),
female = sum(female, na.rm = TRUE),
total = sum(total, na.rm = TRUE),
facility = sum(facility, na.rm = TRUE)) %>%
mutate(total = ifelse(total == 0 & male > 0 | female > 0, male + female, total)),
by = c("county" = "county", "month" = "month", "sub_indicator_alt" = "sub_indicator_alt")
) %>%
arrange(county, month)
crossing(combined %>% distinct(county),
full_months,
messy) %>%
rename(sub_indicator = messy,
month = full_months) %>%
mutate(sub_indicator_alt = str_sub(sub_indicator, start = 1L, end = 15L)) %>%
mutate(sub_indicator_alt = str_replace_all(sub_indicator_alt, "all_", "all"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "cwd_", "cwd"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "host", "host_community"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "refu", "refugees"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "narr", "narrative"),
sub_indicator_alt = ifelse(sub_indicator %in% c("new_classrooms",
"indicator2_new_latrines",
"indicator2_rehabilitated_classrooms",
"indicator2_rehabiltated_latrines"),
sub_indicator, sub_indicator_alt)) %>%
select(-sub_indicator) %>%
filter(!str_detect(sub_indicator_alt, "x|month")) %>%
distinct(county, month, sub_indicator_alt) %>%
left_join(
combined %>%
select(month, county, sub_indicator, value, sex_modifier) %>%
filter(!is.na(value)) %>%
pivot_wider(names_from = sex_modifier,
values_from = value) %>%
mutate(sub_indicator_alt = str_sub(sub_indicator, start = 1L, end = 15L)) %>%
rename(facility = `NA`) %>%
mutate(sub_indicator_alt = str_replace_all(sub_indicator_alt, "all_", "all"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "cwd_", "cwd"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "host", "host_community"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "refu", "refugees"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "narr", "narrative"),
sub_indicator_alt = ifelse(sub_indicator %in% c("new_classrooms",
"indicator2_new_latrines",
"indicator2_rehabilitated_classrooms",
"indicator2_rehabiltated_latrines"),
sub_indicator, sub_indicator_alt)) %>%
group_by(month, county, sub_indicator_alt) %>%
summarise(male = sum(male, na.rm = TRUE),
female = sum(female, na.rm = TRUE),
total = sum(total, na.rm = TRUE),
facility = sum(facility, na.rm = TRUE)) %>%
mutate(total = ifelse(total == 0 & male > 0 | female > 0, male + female, total)),
by = c("county" = "county", "month" = "month", "sub_indicator_alt" = "sub_indicator_alt")
) %>%
mutate(month = fct_relevel(month, full_months)) %>%
arrange(county, month)
crossing(combined %>% distinct(county),
full_months,
messy) %>%
rename(sub_indicator = messy,
month = full_months) %>%
mutate(sub_indicator_alt = str_sub(sub_indicator, start = 1L, end = 15L)) %>%
mutate(sub_indicator_alt = str_replace_all(sub_indicator_alt, "all_", "all"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "cwd_", "cwd"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "host", "host_community"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "refu", "refugees"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "narr", "narrative"),
sub_indicator_alt = ifelse(sub_indicator %in% c("new_classrooms",
"indicator2_new_latrines",
"indicator2_rehabilitated_classrooms",
"indicator2_rehabiltated_latrines"),
sub_indicator, sub_indicator_alt)) %>%
select(-sub_indicator) %>%
filter(!str_detect(sub_indicator_alt, "x|month")) %>%
distinct(county, month, sub_indicator_alt) %>%
left_join(
combined %>%
select(month, county, sub_indicator, value, sex_modifier) %>%
filter(!is.na(value)) %>%
pivot_wider(names_from = sex_modifier,
values_from = value) %>%
mutate(sub_indicator_alt = str_sub(sub_indicator, start = 1L, end = 15L)) %>%
rename(facility = `NA`) %>%
mutate(sub_indicator_alt = str_replace_all(sub_indicator_alt, "all_", "all"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "cwd_", "cwd"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "host", "host_community"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "refu", "refugees"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "narr", "narrative"),
sub_indicator_alt = ifelse(sub_indicator %in% c("new_classrooms",
"indicator2_new_latrines",
"indicator2_rehabilitated_classrooms",
"indicator2_rehabiltated_latrines"),
sub_indicator, sub_indicator_alt)) %>%
group_by(month, county, sub_indicator_alt) %>%
summarise(male = sum(male, na.rm = TRUE),
female = sum(female, na.rm = TRUE),
total = sum(total, na.rm = TRUE),
facility = sum(facility, na.rm = TRUE)) %>%
mutate(total = ifelse(total == 0 & male > 0 | female > 0, male + female, total)),
by = c("county" = "county", "month" = "month", "sub_indicator_alt" = "sub_indicator_alt")
) %>%
mutate(month = fct_relevel(month, full_months)) %>%
arrange(county, month) %>%
replace_na(list(male = 0,
female = 0,
total = 0,
facility = 0))
crossing(combined %>% distinct(county),
full_months,
messy) %>%
rename(sub_indicator = messy,
month = full_months) %>%
mutate(sub_indicator_alt = str_sub(sub_indicator, start = 1L, end = 15L)) %>%
mutate(sub_indicator_alt = str_replace_all(sub_indicator_alt, "all_", "all"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "cwd_", "cwd"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "host", "host_community"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "refu", "refugees"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "narr", "narrative"),
sub_indicator_alt = ifelse(sub_indicator %in% c("new_classrooms",
"indicator2_new_latrines",
"indicator2_rehabilitated_classrooms",
"indicator2_rehabiltated_latrines"),
sub_indicator, sub_indicator_alt)) %>%
select(-sub_indicator) %>%
filter(!str_detect(sub_indicator_alt, "x|month")) %>%
distinct(county, month, sub_indicator_alt) %>%
left_join(
combined %>%
select(month, county, sub_indicator, value, sex_modifier) %>%
filter(!is.na(value)) %>%
pivot_wider(names_from = sex_modifier,
values_from = value) %>%
mutate(sub_indicator_alt = str_sub(sub_indicator, start = 1L, end = 15L)) %>%
rename(facility = `NA`) %>%
mutate(sub_indicator_alt = str_replace_all(sub_indicator_alt, "all_", "all"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "cwd_", "cwd"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "host", "host_community"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "refu", "refugees"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "narr", "narrative"),
sub_indicator_alt = ifelse(sub_indicator %in% c("new_classrooms",
"indicator2_new_latrines",
"indicator2_rehabilitated_classrooms",
"indicator2_rehabiltated_latrines"),
sub_indicator, sub_indicator_alt)) %>%
group_by(month, county, sub_indicator_alt) %>%
summarise(male = sum(male, na.rm = TRUE),
female = sum(female, na.rm = TRUE),
total = sum(total, na.rm = TRUE),
facility = sum(facility, na.rm = TRUE)) %>%
mutate(total = ifelse(total == 0 & male > 0 | female > 0, male + female, total)),
by = c("county" = "county", "month" = "month", "sub_indicator_alt" = "sub_indicator_alt")
) %>%
mutate(month = fct_relevel(month, full_months)) %>%
arrange(county, month) %>%
replace_na(list(male = 0,
female = 0,
total = 0,
facility = 0)) %>%
filter(!str_detect(sub_indicator_alt, "narrative")) %>%
mutate(comments = "")
data_entry_long <- crossing(combined %>% distinct(county),
full_months,
messy) %>%
rename(sub_indicator = messy,
month = full_months) %>%
mutate(sub_indicator_alt = str_sub(sub_indicator, start = 1L, end = 15L)) %>%
mutate(sub_indicator_alt = str_replace_all(sub_indicator_alt, "all_", "all"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "cwd_", "cwd"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "host", "host_community"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "refu", "refugees"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "narr", "narrative"),
sub_indicator_alt = ifelse(sub_indicator %in% c("new_classrooms",
"indicator2_new_latrines",
"indicator2_rehabilitated_classrooms",
"indicator2_rehabiltated_latrines"),
sub_indicator, sub_indicator_alt)) %>%
select(-sub_indicator) %>%
filter(!str_detect(sub_indicator_alt, "x|month")) %>%
distinct(county, month, sub_indicator_alt) %>%
left_join(
combined %>%
select(month, county, sub_indicator, value, sex_modifier) %>%
filter(!is.na(value)) %>%
pivot_wider(names_from = sex_modifier,
values_from = value) %>%
mutate(sub_indicator_alt = str_sub(sub_indicator, start = 1L, end = 15L)) %>%
rename(facility = `NA`) %>%
mutate(sub_indicator_alt = str_replace_all(sub_indicator_alt, "all_", "all"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "cwd_", "cwd"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "host", "host_community"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "refu", "refugees"),
sub_indicator_alt = str_replace_all(sub_indicator_alt, "narr", "narrative"),
sub_indicator_alt = ifelse(sub_indicator %in% c("new_classrooms",
"indicator2_new_latrines",
"indicator2_rehabilitated_classrooms",
"indicator2_rehabiltated_latrines"),
sub_indicator, sub_indicator_alt)) %>%
group_by(month, county, sub_indicator_alt) %>%
summarise(male = sum(male, na.rm = TRUE),
female = sum(female, na.rm = TRUE),
total = sum(total, na.rm = TRUE),
facility = sum(facility, na.rm = TRUE)) %>%
mutate(total = ifelse(total == 0 & male > 0 | female > 0, male + female, total)),
by = c("county" = "county", "month" = "month", "sub_indicator_alt" = "sub_indicator_alt")
) %>%
mutate(month = fct_relevel(month, full_months)) %>%
arrange(county, month) %>%
replace_na(list(male = 0,
female = 0,
total = 0,
facility = 0)) %>%
filter(!str_detect(sub_indicator_alt, "narrative")) %>%
mutate(comments = "")
data_entry_long %>%
write_xlsx("./data/data_entry_long.xlsx")
combined %>%
filter(str_detect(sub_indicator, "all|cwd"))
combined %>%
filter(str_detect(sub_indicator, "total|cwd"))
combined %>%
filter(str_detect(sub_indicator, "all_total|cwd"))
combined %>%
filter(str_detect(sub_indicator, "all_total|cwd") & !str_detect(sub_indicator, "boys|girls"))
combined %>%
filter(str_detect(sub_indicator, "all_total|cwd") & !str_detect(sub_indicator, "boys|girls")) %>%
replace_na(list(value = 0)) %>%
mutate(indicator = str_sub(sub_indicator, 1L, 10L))
combined %>%
filter(str_detect(sub_indicator, "all_total|cwd") & !str_detect(sub_indicator, "boys|girls")) %>%
replace_na(list(value = 0)) %>%
mutate(indicator = str_sub(sub_indicator, 1L, 10L)) %>%
ggplot(aes(x = value, y = indicator)) +
geom_col()
combined %>%
filter(str_detect(sub_indicator, "all_total|cwd") & !str_detect(sub_indicator, "boys|girls")) %>%
replace_na(list(value = 0)) %>%
mutate(indicator = str_sub(sub_indicator, 1L, 10L)) %>%
ggplot(aes(x = value, y = indicator)) +
geom_col(aes(fill = beneficiary_group))
combined %>%
filter(str_detect(sub_indicator, "all_total|cwd") & !str_detect(sub_indicator, "boys|girls")) %>%
replace_na(list(value = 0)) %>%
mutate(indicator = str_sub(sub_indicator, 1L, 10L)) %>%
ggplot(aes(x = value, y = indicator)) +
geom_col(aes(fill = beneficiary_group),
position = position_dodge(width = .9))
combined %>%
filter(str_detect(sub_indicator, "all_total|cwd") & !str_detect(sub_indicator, "boys|girls")) %>%
replace_na(list(value = 0)) %>%
mutate(indicator = str_sub(sub_indicator, 1L, 10L)) %>%
group_by(indicator, beneficiary_group) %>%
summarise(value = sum(value))
combined %>%
filter(str_detect(sub_indicator, "all_total|cwd") & !str_detect(sub_indicator, "boys|girls")) %>%
replace_na(list(value = 0)) %>%
mutate(indicator = str_sub(sub_indicator, 1L, 10L)) %>%
group_by(indicator, beneficiary_group) %>%
summarise(value = sum(value)) %>%
pivot_wider(names_from = beneficiary_group,
values_from = value)
combined %>%
filter(str_detect(sub_indicator, "all_total|cwd") & !str_detect(sub_indicator, "boys|girls")) %>%
replace_na(list(value = 0)) %>%
mutate(indicator = str_sub(sub_indicator, 1L, 10L)) %>%
group_by(indicator, beneficiary_group) %>%
summarise(value = sum(value)) %>%
pivot_wider(names_from = beneficiary_group,
values_from = value,
values_fill = 0) %>%
mutate(pc = cwd / all)
combined %>%
filter(str_detect(sub_indicator, "all_total|cwd") & !str_detect(sub_indicator, "boys|girls")) %>%
replace_na(list(value = 0)) %>%
mutate(indicator = str_sub(sub_indicator, 1L, 10L)) %>%
group_by(indicator, beneficiary_group) %>%
summarise(value = sum(value)) %>%
pivot_wider(names_from = beneficiary_group,
values_from = value,
values_fill = 0) %>%
mutate(pc = cwd / all * 100)
combined %>%
glimpse()
combined %>%
group_by(unicef_indicator, beneficiary_group) %>%
glimpse()
combined %>%
group_by(unicef_indicator, beneficiary_group) %>%
summarise(value = sum(value))
combined %>%
group_by(unicef_indicator, beneficiary_group) %>%
summarise(value = sum(value, na.rm = TRUE))
combined %>%
filter(!str_detect(unicef_indicator, "6")) %>%
group_by(unicef_indicator, beneficiary_group) %>%
summarise(value = sum(value, na.rm = TRUE)) %>%
filter(beneficiary_group %out% c("all", "cwd"))
combined %>%
filter(!str_detect(unicef_indicator, "6")) %>%
group_by(unicef_indicator, beneficiary_group) %>%
summarise(value = sum(value, na.rm = TRUE)) %>%
filter(beneficiary_group %out% c("all", "cwd") & !is.na(beneficiary_group)) %>%
ggplot(aes(x = value, y = unicef_indicator_number)) +
geom_col(aes(fill = beneficiary_group),
position = position_stack())
combined %>%
filter(!str_detect(unicef_indicator, "6")) %>%
group_by(unicef_indicator, beneficiary_group) %>%
summarise(value = sum(value, na.rm = TRUE)) %>%
filter(beneficiary_group %out% c("all", "cwd") & !is.na(beneficiary_group)) %>%
ggplot(aes(x = value, y = unicef_indicator_number)) +
geom_col(aes(fill = beneficiary_group))
combined %>%
filter(!str_detect(unicef_indicator, "6")) %>%
group_by(unicef_indicator_number, beneficiary_group) %>%
summarise(value = sum(value, na.rm = TRUE)) %>%
filter(beneficiary_group %out% c("all", "cwd") & !is.na(beneficiary_group)) %>%
ggplot(aes(x = value, y = unicef_indicator_number)) +
geom_col(aes(fill = beneficiary_group))
combined %>%
filter(!str_detect(unicef_indicator, "6")) %>%
group_by(unicef_indicator_number, beneficiary_group) %>%
summarise(value = sum(value, na.rm = TRUE)) %>%
filter(beneficiary_group %out% c("all", "cwd") & !is.na(beneficiary_group)) %>%
mutate(unicef_indicator_number = as.character.factor(unicef_indicator_number)) %>%
ggplot(aes(x = value, y = unicef_indicator_number)) +
geom_col(aes(fill = beneficiary_group),
position = )
combined %>%
filter(!str_detect(unicef_indicator, "6")) %>%
group_by(unicef_indicator_number, beneficiary_group) %>%
summarise(value = sum(value, na.rm = TRUE)) %>%
filter(beneficiary_group %out% c("all", "cwd") & !is.na(beneficiary_group)) %>%
mutate(unicef_indicator_number = as.factor(unicef_indicator_number)) %>%
ggplot(aes(x = value, y = unicef_indicator_number)) +
geom_col(aes(fill = beneficiary_group),
position = position_stack())
combined %>%
filter(!str_detect(unicef_indicator, "6")) %>%
group_by(unicef_indicator_number, beneficiary_group) %>%
summarise(value = sum(value, na.rm = TRUE)) %>%
filter(beneficiary_group %out% c("all", "cwd") & !is.na(beneficiary_group)) %>%
mutate(unicef_indicator_number = as.factor(unicef_indicator_number),
unicef_indicator_number = fct_rev(unicef_indicator_number)) %>%
ggplot(aes(x = value, y = unicef_indicator_number)) +
geom_col(aes(fill = beneficiary_group),
position = position_stack()) +
scale_fill_viridis_d()
combined %>%
filter(!str_detect(unicef_indicator, "6")) %>%
group_by(unicef_indicator_number, beneficiary_group) %>%
summarise(value = sum(value, na.rm = TRUE)) %>%
filter(beneficiary_group %out% c("all", "cwd") & !is.na(beneficiary_group)) %>%
mutate(unicef_indicator_number = as.factor(unicef_indicator_number),
unicef_indicator_number = fct_rev(unicef_indicator_number)) %>%
ggplot(aes(x = value, y = unicef_indicator_number)) +
geom_col(aes(fill = beneficiary_group),
position = position_stack()) +
scale_fill_viridis_d(begin = .2)
