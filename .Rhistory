eie %>%
mutate_at(vars(boys, girls, men, women), ~ replace_na(., 0)) %>%
group_by(indicator_short) %>%
summarise_at(vars(boys, girls, men, women), ~ sum(., na.rm = TRUE))
eie %>%
mutate_at(vars(boys, girls, men, women), ~ replace_na(., 0)) %>%
group_by(indicator_short) %>%
summarise_at(vars(boys, girls, men, women), ~ sum(., na.rm = TRUE)) %>%
mutate(female = (women + girls) / total_reached,
male = (boys + men) / total_reached) %>%
pivot_longer(cols = c(female, male),
names_to = "sex",
values_to = "pc") %>%
ggplot(aes(x = pc, y = indicator_short, fill = sex)) +
geom_col()
eie %>%
mutate_at(vars(boys, girls, men, women), ~ replace_na(., 0)) %>%
group_by(indicator_short) %>%
summarise_at(vars(boys, girls, men, women), ~ sum(., na.rm = TRUE)) %>%
mutate(total_reached = boys + girls + men + women) %>%
mutate(female = (women + girls) / total_reached,
male = (boys + men) / total_reached) %>%
pivot_longer(cols = c(female, male),
names_to = "sex",
values_to = "pc") %>%
ggplot(aes(x = pc, y = indicator_short, fill = sex)) +
geom_col()
eie %>%
mutate(indicator_short = fct_rev(indicator_short)) %>%
mutate_at(vars(boys, girls, men, women), ~ replace_na(., 0)) %>%
group_by(indicator_short) %>%
summarise_at(vars(boys, girls, men, women), ~ sum(., na.rm = TRUE)) %>%
mutate(total_reached = boys + girls + men + women,
female = (women + girls) / total_reached,
male = (boys + men) / total_reached) %>%
pivot_longer(cols = c(female, male),
names_to = "sex",
values_to = "pc") %>%
ggplot(aes(x = pc, y = indicator_short, fill = sex)) +
geom_col()
eie %>%
mutate(indicator_short = fct_rev(indicator_short)) %>%
mutate_at(vars(boys, girls, men, women), ~ replace_na(., 0)) %>%
group_by(indicator_short) %>%
summarise_at(vars(boys, girls, men, women), ~ sum(., na.rm = TRUE)) %>%
mutate(total_reached = boys + girls + men + women,
female = (women + girls) / total_reached,
male = (boys + men) / total_reached) %>%
pivot_longer(cols = c(female, male),
names_to = "sex",
values_to = "pc") %>%
ggplot(aes(x = pc, y = indicator_short, fill = sex)) +
geom_col() +
scale_fill_manual(values = c("#443983", "#35b779")) +
labs(x = "%",
y = "")
eie %>%
mutate(indicator_short = fct_rev(indicator_short)) %>%
mutate_at(vars(boys, girls, men, women), ~ replace_na(., 0)) %>%
group_by(indicator_short) %>%
summarise_at(vars(boys, girls, men, women), ~ sum(., na.rm = TRUE)) %>%
mutate(total_reached = boys + girls + men + women,
female = (women + girls) / total_reached,
male = (boys + men) / total_reached) %>%
pivot_longer(cols = c(female, male),
names_to = "sex",
values_to = "pc") %>%
ggplot(aes(x = pc, y = indicator_short, fill = sex)) +
geom_col() +
scale_fill_manual(values = c("#443983", "#35b779")) +
scale_x_continuous(labels = percent) +
labs(x = "%",
y = "")
eie %>%
mutate(indicator_short = fct_rev(indicator_short)) %>%
mutate_at(vars(boys, girls, men, women), ~ replace_na(., 0)) %>%
group_by(indicator_short) %>%
summarise_at(vars(boys, girls, men, women), ~ sum(., na.rm = TRUE)) %>%
mutate(total_reached = boys + girls + men + women,
female = (women + girls) / total_reached,
male = (boys + men) / total_reached) %>%
pivot_longer(cols = c(female, male),
names_to = "sex",
values_to = "pc") %>%
ggplot(aes(x = pc, y = indicator_short, fill = sex)) +
geom_col() +
geom_text(labels = percent(pc), position = "stack") +
scale_fill_manual(values = c("#443983", "#35b779")) +
scale_x_continuous(labels = percent) +
labs(x = "",
y = "",
title = "Sex breakdown by indicator")
eie %>%
mutate(indicator_short = fct_rev(indicator_short)) %>%
mutate_at(vars(boys, girls, men, women), ~ replace_na(., 0)) %>%
group_by(indicator_short) %>%
summarise_at(vars(boys, girls, men, women), ~ sum(., na.rm = TRUE)) %>%
mutate(total_reached = boys + girls + men + women,
female = (women + girls) / total_reached,
male = (boys + men) / total_reached) %>%
pivot_longer(cols = c(female, male),
names_to = "sex",
values_to = "pc") %>%
ggplot(aes(x = pc, y = indicator_short, fill = sex)) +
geom_col() +
geom_text(aaes(labels = percent(pc)), position = "stack") +
scale_fill_manual(values = c("#443983", "#35b779")) +
scale_x_continuous(labels = percent) +
labs(x = "",
y = "",
title = "Sex breakdown by indicator")
eie %>%
mutate(indicator_short = fct_rev(indicator_short)) %>%
mutate_at(vars(boys, girls, men, women), ~ replace_na(., 0)) %>%
group_by(indicator_short) %>%
summarise_at(vars(boys, girls, men, women), ~ sum(., na.rm = TRUE)) %>%
mutate(total_reached = boys + girls + men + women,
female = (women + girls) / total_reached,
male = (boys + men) / total_reached) %>%
pivot_longer(cols = c(female, male),
names_to = "sex",
values_to = "pc") %>%
ggplot(aes(x = pc, y = indicator_short, fill = sex)) +
geom_col() +
geom_text(aes(labels = percent(pc)), position = "stack") +
scale_fill_manual(values = c("#443983", "#35b779")) +
scale_x_continuous(labels = percent) +
labs(x = "",
y = "",
title = "Sex breakdown by indicator")
eie %>%
mutate(indicator_short = fct_rev(indicator_short)) %>%
mutate_at(vars(boys, girls, men, women), ~ replace_na(., 0)) %>%
group_by(indicator_short) %>%
summarise_at(vars(boys, girls, men, women), ~ sum(., na.rm = TRUE)) %>%
mutate(total_reached = boys + girls + men + women,
female = (women + girls) / total_reached,
male = (boys + men) / total_reached) %>%
pivot_longer(cols = c(female, male),
names_to = "sex",
values_to = "pc") %>%
ggplot(aes(x = pc, y = indicator_short, fill = sex)) +
geom_col() +
geom_text(aes(labels = percent(pc))) +
scale_fill_manual(values = c("#443983", "#35b779")) +
scale_x_continuous(labels = percent) +
labs(x = "",
y = "",
title = "Sex breakdown by indicator")
eie %>%
mutate(indicator_short = fct_rev(indicator_short)) %>%
mutate_at(vars(boys, girls, men, women), ~ replace_na(., 0)) %>%
group_by(indicator_short) %>%
summarise_at(vars(boys, girls, men, women), ~ sum(., na.rm = TRUE)) %>%
mutate(total_reached = boys + girls + men + women,
female = (women + girls) / total_reached,
male = (boys + men) / total_reached) %>%
pivot_longer(cols = c(female, male),
names_to = "sex",
values_to = "pc") %>%
ggplot(aes(x = pc, y = indicator_short, fill = sex)) +
geom_col() +
geom_text(aes(label = percent(pc))) +
scale_fill_manual(values = c("#443983", "#35b779")) +
scale_x_continuous(labels = percent) +
labs(x = "",
y = "",
title = "Sex breakdown by indicator")
eie %>%
mutate(indicator_short = fct_rev(indicator_short)) %>%
mutate_at(vars(boys, girls, men, women), ~ replace_na(., 0)) %>%
group_by(indicator_short) %>%
summarise_at(vars(boys, girls, men, women), ~ sum(., na.rm = TRUE)) %>%
mutate(total_reached = boys + girls + men + women,
female = (women + girls) / total_reached,
male = (boys + men) / total_reached) %>%
pivot_longer(cols = c(female, male),
names_to = "sex",
values_to = "pc") %>%
ggplot(aes(x = pc, y = indicator_short, fill = sex)) +
geom_col() +
geom_text(aes(label = percent(pc, accuracy = 1)), hjust = "inward") +
scale_fill_manual(values = c("#443983", "#35b779")) +
scale_x_continuous(labels = percent) +
labs(x = "",
y = "",
title = "Sex breakdown by indicator")
eie %>%
mutate(indicator_short = fct_rev(indicator_short)) %>%
mutate_at(vars(boys, girls, men, women), ~ replace_na(., 0)) %>%
group_by(indicator_short) %>%
summarise_at(vars(boys, girls, men, women), ~ sum(., na.rm = TRUE)) %>%
mutate(total_reached = boys + girls + men + women,
female = (women + girls) / total_reached,
male = (boys + men) / total_reached) %>%
pivot_longer(cols = c(female, male),
names_to = "sex",
values_to = "pc") %>%
ggplot(aes(x = pc, y = indicator_short, fill = sex)) +
geom_col() +
geom_text(aes(x = sex,
y = pc,
label = percent(pc, accuracy = 1)),
position = position_stack(hjust = .5)) +
scale_fill_manual(values = c("#443983", "#35b779")) +
scale_x_continuous(labels = percent) +
labs(x = "",
y = "",
title = "Sex breakdown by indicator")
eie %>%
mutate(indicator_short = fct_rev(indicator_short)) %>%
mutate_at(vars(boys, girls, men, women), ~ replace_na(., 0)) %>%
group_by(indicator_short) %>%
summarise_at(vars(boys, girls, men, women), ~ sum(., na.rm = TRUE)) %>%
mutate(total_reached = boys + girls + men + women,
female = (women + girls) / total_reached,
male = (boys + men) / total_reached) %>%
pivot_longer(cols = c(female, male),
names_to = "sex",
values_to = "pc") %>%
ggplot(aes(x = pc, y = indicator_short, fill = sex)) +
geom_col() +
geom_text(aes(x = sex,
y = pc,
label = percent(pc, accuracy = 1)),
position = position_stack(vjust = .5)) +
scale_fill_manual(values = c("#443983", "#35b779")) +
scale_x_continuous(labels = percent) +
labs(x = "",
y = "",
title = "Sex breakdown by indicator")
eie %>%
mutate(indicator_short = fct_rev(indicator_short)) %>%
mutate_at(vars(boys, girls, men, women), ~ replace_na(., 0)) %>%
group_by(indicator_short) %>%
summarise_at(vars(boys, girls, men, women), ~ sum(., na.rm = TRUE)) %>%
mutate(total_reached = boys + girls + men + women,
female = (women + girls) / total_reached,
male = (boys + men) / total_reached) %>%
pivot_longer(cols = c(female, male),
names_to = "sex",
values_to = "pc") %>%
ggplot(aes(x = pc, y = indicator_short, fill = sex)) +
geom_col() +
geom_text(aes(x = pc,
y = indicator,
label = percent(pc, accuracy = 1)),
position = position_stack(vjust = .5)) +
scale_fill_manual(values = c("#443983", "#35b779")) +
scale_x_continuous(labels = percent) +
labs(x = "",
y = "",
title = "Sex breakdown by indicator")
eie %>%
mutate(indicator_short = fct_rev(indicator_short)) %>%
mutate_at(vars(boys, girls, men, women), ~ replace_na(., 0)) %>%
group_by(indicator_short) %>%
summarise_at(vars(boys, girls, men, women), ~ sum(., na.rm = TRUE)) %>%
mutate(total_reached = boys + girls + men + women,
female = (women + girls) / total_reached,
male = (boys + men) / total_reached) %>%
pivot_longer(cols = c(female, male),
names_to = "sex",
values_to = "pc") %>%
ggplot(aes(x = pc, y = indicator_short, fill = sex)) +
geom_col() +
geom_text(aes(x = pc,
y = indicator_short,
label = percent(pc, accuracy = 1)),
position = position_stack(vjust = .5)) +
scale_fill_manual(values = c("#443983", "#35b779")) +
scale_x_continuous(labels = percent) +
labs(x = "",
y = "",
title = "Sex breakdown by indicator")
eie %>%
mutate(indicator_short = fct_rev(indicator_short)) %>%
mutate_at(vars(boys, girls, men, women), ~ replace_na(., 0)) %>%
group_by(indicator_short) %>%
summarise_at(vars(boys, girls, men, women), ~ sum(., na.rm = TRUE)) %>%
mutate(total_reached = boys + girls + men + women,
female = (women + girls) / total_reached,
male = (boys + men) / total_reached) %>%
pivot_longer(cols = c(female, male),
names_to = "sex",
values_to = "pc") %>%
ggplot(aes(x = pc, y = indicator_short, fill = sex)) +
geom_col() +
geom_text(aes(x = pc,
y = indicator_short,
label = percent(pc, accuracy = 1)),
position = position_stack(vjust = .5),
colour = "white") +
scale_fill_manual(values = c("#443983", "#35b779")) +
scale_x_continuous(labels = percent) +
labs(x = "",
y = "",
title = "Sex breakdown by indicator")
eie %>%
filter(activity_status == "Completed") %>%
mutate(latest_reached = ifelse(month == "May", total_reached, NA_integer_)) %>%
group_by(indicator) %>%
summarise(partners = n_distinct(implementing_partner),
sub_counties = n_distinct(sub_county),
counties = n_distinct(adm1_pcode),
schools = sum(schools, na.rm = TRUE),
latest_reached = sum(latest_reached, na.rm = TRUE),
total_reached = sum(total_reached, na.rm = TRUE)) %>%
flextable() %>%
theme_zebra() %>%
set_table_properties(layout = "autofit", width = .99) %>%
fontsize(i = 1:6, j = 1, size = 9) %>%
fontsize(size = 9, part = "header")
eie %>%
filter(activity_status == "Completed") %>%
mutate(latest_reached = ifelse(month == "May", total_reached, NA_integer_)) %>%
group_by(indicator) %>%
summarise(partners = n_distinct(implementing_partner),
sub_counties = n_distinct(sub_county[filter(!str_detect(sub_county), "\\,"))]),
eie %>%
filter(activity_status == "Completed") %>%
mutate(latest_reached = ifelse(month == "May", total_reached, NA_integer_)) %>%
group_by(indicator) %>%
summarise(partners = n_distinct(implementing_partner),
sub_counties = n_distinct(sub_county[filter(!str_detect(sub_county), "\\,")]),
counties = n_distinct(adm1_pcode),
schools = sum(schools, na.rm = TRUE),
latest_reached = sum(latest_reached, na.rm = TRUE),
total_reached = sum(total_reached, na.rm = TRUE)) %>%
flextable() %>%
theme_zebra() %>%
set_table_properties(layout = "autofit", width = .99) %>%
fontsize(i = 1:6, j = 1, size = 9) %>%
fontsize(size = 9, part = "header")
eie %>%
filter(!str_detect(sub_county, "\\,"))
eie %>%
filter(activity_status == "Completed") %>%
mutate(latest_reached = ifelse(month == "May", total_reached, NA_integer_)) %>%
group_by(indicator) %>%
summarise(partners = n_distinct(implementing_partner),
sub_counties = n_distinct(sub_county[filter(!str_detect(sub_county, "\\,"))]),
counties = n_distinct(adm1_pcode),
schools = sum(schools, na.rm = TRUE),
latest_reached = sum(latest_reached, na.rm = TRUE),
total_reached = sum(total_reached, na.rm = TRUE)) %>%
flextable() %>%
theme_zebra() %>%
set_table_properties(layout = "autofit", width = .99) %>%
fontsize(i = 1:6, j = 1, size = 9) %>%
fontsize(size = 9, part = "header")
eie %>%
glimpse()
eie %>%
filter(activity_status == "Completed") %>%
mutate(latest_reached = ifelse(month == "May", total_reached, NA_integer_)) %>%
group_by(indicator) %>%
summarise(partners = n_distinct(implementing_partner),
sub_counties = n_distinct(sub_county[filter(!str_detect(sub_county, "\\,"))]),
counties = n_distinct(adm1_pcode),
schools = sum(schools, na.rm = TRUE),
latest_reached = sum(latest_reached, na.rm = TRUE),
total_reached = sum(total_reached, na.rm = TRUE)) %>%
flextable() %>%
theme_zebra() %>%
set_table_properties(layout = "autofit", width = .99) %>%
fontsize(i = 1:6, j = 1, size = 9) %>%
fontsize(size = 9, part = "header")
eie %>%
glimpse()
eie %>%
filter(activity_status == "Completed") %>%
mutate(latest_reached = ifelse(month == "May", total_reached, NA_integer_)) %>%
group_by(indicator) %>%
summarise(partners = n_distinct(implementing_partner),
counties = n_distinct(adm1_pcode),
schools = sum(schools, na.rm = TRUE),
latest_reached = sum(latest_reached, na.rm = TRUE),
total_reached = sum(total_reached, na.rm = TRUE)) %>%
flextable() %>%
theme_zebra() %>%
set_table_properties(layout = "autofit", width = .99) %>%
fontsize(i = 1:6, j = 1, size = 9) %>%
fontsize(size = 9, part = "header")
eie %>% glimpse()
eie %>%
mutate_at(vars(boys, girls, men, women), ~ replace_na(., 0)) %>%
group_by(education_level, indicator) %>%
summarise_at(vars(boys, girls, men, women), ~ sum(., na.rm = TRUE))
eie %>% count(education_level)
eie %>%
filter(!is.na(education_level)) %>%
group_by(education_leel, indicator) %>%
summarise(beneficiaries = sum(total_reached, na.rm = TRUE)) %>%
group_by(indicator) %>%
mutate(total = sum(beneficiaries)) %>%
ungroup()
eie %>%
filter(!is.na(education_level)) %>%
group_by(education_level, indicator) %>%
summarise(beneficiaries = sum(total_reached, na.rm = TRUE)) %>%
group_by(indicator) %>%
mutate(total = sum(beneficiaries)) %>%
ungroup()
eie %>%
filter(!is.na(education_level)) %>%
group_by(education_level, indicator_short) %>%
summarise(beneficiaries = sum(total_reached, na.rm = TRUE)) %>%
group_by(indicator_short) %>%
mutate(total = sum(beneficiaries)) %>%
ungroup() %>%
mutate(pc = beneficiaries / total,
indicator_short = fct_rev(indicator_short)) %>%
ggplot(aes(x = pc, y = indicator_short)) +
geom_col() +
geom_text(aes(x = pc,
y = indicator_short,
label = percent(pc, accuracy = 1)),
position = position_stack(vjust = .5),
colour = "white") +
scale_fill_viridis_d(option = "mako") +
scale_x_continuous(labels = percent) +
labs(x = "",
y = "",
title = "Sex breakdown by indicator")
eie %>%
filter(!is.na(education_level)) %>%
group_by(education_level, indicator_short) %>%
summarise(beneficiaries = sum(total_reached, na.rm = TRUE)) %>%
group_by(indicator_short) %>%
mutate(total = sum(beneficiaries)) %>%
ungroup() %>%
mutate(pc = beneficiaries / total,
indicator_short = fct_rev(indicator_short)) %>%
ggplot(aes(x = pc, y = indicator_short, fill = education_level)) +
geom_col() +
geom_text(aes(x = pc,
y = indicator_short,
label = percent(pc, accuracy = 1)),
position = position_stack(vjust = .5),
colour = "white") +
scale_fill_viridis_d(option = "mako") +
scale_x_continuous(labels = percent) +
labs(x = "",
y = "",
title = "Sex breakdown by indicator")
eie %>%
filter(!is.na(education_level)) %>%
group_by(education_level, indicator_short) %>%
summarise(beneficiaries = sum(total_reached, na.rm = TRUE)) %>%
group_by(indicator_short) %>%
mutate(total = sum(beneficiaries)) %>%
ungroup() %>%
mutate(pc = beneficiaries / total,
indicator_short = fct_rev(indicator_short)) %>%
ggplot(aes(x = pc, y = indicator_short, fill = education_level)) +
geom_col() +
geom_text(aes(x = pc,
y = indicator_short,
label = percent(pc, accuracy = 1)),
position = position_stack(vjust = .5),
colour = "white") +
scale_fill_viridis_d(option = "mako") +
scale_x_continuous(labels = percent) +
labs(x = "",
y = "",
title = "Sex breakdown by indicator",
fill = "")
eie %>%
filter(!is.na(education_level)) %>%
group_by(education_level, indicator_short) %>%
summarise(beneficiaries = sum(total_reached, na.rm = TRUE)) %>%
group_by(indicator_short) %>%
mutate(total = sum(beneficiaries)) %>%
ungroup() %>%
mutate(pc = beneficiaries / total,
indicator_short = fct_rev(indicator_short)) %>%
ggplot(aes(x = pc, y = indicator_short, fill = education_level)) +
geom_col() +
geom_text(aes(x = pc,
y = indicator_short,
label = percent(pc, accuracy = 1)),
position = position_stack(vjust = .5),
colour = "white") +
scale_fill_viridis_d(option = "mako") +
scale_x_continuous(labels = percent) +
labs(x = "",
y = "",
title = "Sex breakdown by indicator",
fill = "")
eie %>%
filter(!is.na(education_level)) %>%
group_by(education_level, indicator_short) %>%
summarise(beneficiaries = sum(total_reached, na.rm = TRUE)) %>%
group_by(indicator_short) %>%
mutate(total = sum(beneficiaries)) %>%
ungroup() %>%
mutate(pc = beneficiaries / total,
indicator_short = fct_rev(indicator_short)) %>%
ggplot(aes(x = pc, y = indicator_short, fill = education_level)) +
geom_col() +
geom_text(aes(x = pc,
y = indicator_short,
label = percent(pc, accuracy = 1)),
position = position_stack(vjust = .5),
colour = "white") +
scale_fill_viridis_d(option = "mako") +
scale_x_continuous(labels = percent) +
labs(x = "",
y = "",
title = "Sex breakdown by indicator",
fill = "")
